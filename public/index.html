<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard AnalÃ­tico - Apontamentos & Paradas</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>ğŸ“Š Dashboard AnalÃ­tico</h1>
            <p>AnÃ¡lise de Apontamentos e Paradas de Rendimento</p>
            <button id="refreshBtn" class="refresh-btn">ğŸ”„ Atualizar Dados</button>
        </header>

        <!-- Cards de Resumo -->
        <section class="summary-cards">
            <div class="card">
                <div class="card-icon">ğŸ“‹</div>
                <div class="card-content">
                    <h3>Total Apontamentos</h3>
                    <p class="card-value" id="totalApontamentos">-</p>
                </div>
            </div>
            <div class="card">
                <div class="card-icon">ğŸ‘¥</div>
                <div class="card-content">
                    <h3>FuncionÃ¡rios</h3>
                    <p class="card-value" id="totalFuncionarios">-</p>
                </div>
            </div>
            <div class="card">
                <div class="card-icon">â±ï¸</div>
                <div class="card-content">
                    <h3>Total Horas</h3>
                    <p class="card-value" id="totalHoras">-</p>
                </div>
            </div>
            <div class="card">
                <div class="card-icon">ğŸ’°</div>
                <div class="card-content">
                    <h3>Faturamento Total</h3>
                    <p class="card-value" id="totalFaturamento">-</p>
                </div>
            </div>
            <div class="card">
                <div class="card-icon">ğŸŒ¾</div>
                <div class="card-content">
                    <h3>Total Hectares</h3>
                    <p class="card-value" id="totalHectares">-</p>
                </div>
            </div>
            <div class="card">
                <div class="card-icon">ğŸ“‹</div>
                <div class="card-content">
                    <h3>Atividades Diferentes</h3>
                    <p class="card-value" id="totalAtividades">-</p>
                </div>
            </div>
        </section>

        <!-- GrÃ¡ficos Principais -->
        <section class="charts-grid">
            <div class="chart-container">
                <h2>ğŸ“‰ Paradas Mais Frequentes</h2>
                <canvas id="paradasChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>ğŸ“ˆ Horas Trabalhadas (Ãšltimos 30 dias)</h2>
                <canvas id="horasChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>ğŸ’µ Faturamento por PerÃ­odo</h2>
                <canvas id="faturamentoChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>âš¡ Taxa de Produtividade (Horas vs Paradas)</h2>
                <canvas id="produtividadeChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>ğŸ† Top 10 FuncionÃ¡rios por Horas</h2>
                <canvas id="funcionariosChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>âš ï¸ Impacto de Paradas no PerÃ­odo</h2>
                <canvas id="impactoChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>ğŸŒ¾ Atividades por Hectares Trabalhados</h2>
                <canvas id="atividadesHectaresChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>âš¡ EficiÃªncia: Hectares por Hora</h2>
                <canvas id="eficienciaChart"></canvas>
            </div>

            <div class="chart-container">
                <h2>ğŸ“Š Hectares Trabalhados por PerÃ­odo</h2>
                <canvas id="hectaresPeriodoChart"></canvas>
            </div>
        </section>

        <!-- Tabelas de AnÃ¡lise -->
        <section class="detailed-analysis">
            <h2>ğŸŒ¾ AnÃ¡lise Detalhada de Atividades e Hectares</h2>
            <div class="table-container">
                <table id="atividadesTable">
                    <thead>
                        <tr>
                            <th>Atividade</th>
                            <th>ExecuÃ§Ãµes</th>
                            <th>Total Hectares</th>
                            <th>MÃ©dia ha/execuÃ§Ã£o</th>
                            <th>Total Horas</th>
                            <th>EficiÃªncia (ha/h)</th>
                            <th>Faturamento</th>
                        </tr>
                    </thead>
                    <tbody id="atividadesTableBody">
                        <tr><td colspan="7">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="detailed-analysis">
            <h2>ğŸ“‹ Lista de Atividades Executadas</h2>
            <div class="table-container">
                <table id="listaAtividadesTable">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Atividade</th>
                            <th>Operador</th>
                            <th>MÃ¡quina</th>
                            <th>Fazenda</th>
                            <th>TalhÃ£o</th>
                            <th>Hectares</th>
                            <th>Horas</th>
                            <th>EficiÃªncia</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody id="listaAtividadesTableBody">
                        <tr><td colspan="10">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Tabela de AnÃ¡lise Detalhada -->
        <section class="detailed-analysis">
            <h2>ğŸ“Š AnÃ¡lise Detalhada de Produtividade</h2>
            <div class="table-container">
                <table id="produtividadeTable">
                    <thead>
                        <tr>
                            <th>Data</th>
                            <th>Horas Trabalhadas</th>
                            <th>Horas Paradas</th>
                            <th>Faturamento</th>
                            <th>Qtd Paradas</th>
                            <th>Taxa Produtividade</th>
                        </tr>
                    </thead>
                    <tbody id="produtividadeTableBody">
                        <tr><td colspan="6">Carregando...</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <footer>
            <p>Dashboard desenvolvido com Chart.js | Dados em tempo real do PostgreSQL Railway</p>
        </footer>
    </div>

    <div id="loading" class="loading">
        <div class="spinner"></div>
        <p>Carregando dados...</p>
    </div>

    <script src="app.js"></script>
</body>
</html>
